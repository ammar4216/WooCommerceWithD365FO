using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Net;
using System.IO;
using System.Text;
using System.Collections;
using WooCommerce_helper;
using WooCommerce_helper.BusinessLogic;
using WooCommerce_helper.Models;

namespace ConsoleApp2
{
    class Program
    {
        static void Main(string[] args)
        {


            ExampleConnectOauth exmp = new ExampleConnectOauth();

            var result = exmp.GetValuesRequestOauth("http://202.47.59.85:802/mywebsite/wp-json/wc/v3/orders", "GET");

            var jsonRes = JsonConvert.SerializeObject(result);

            OAuthContract oauthContract = JsonConvert.DeserializeObject<OAuthContract>(jsonRes);

            string OAuthHeader = String.Format("oauth_version=\"1.0\",oauth_consumer_key=\"{0}\",oauth_signature_method=\"{1}\",oauth_signature=\"{2}\",oauth_timestamp=\"{3}\",oauth_nonce=\"{4}\"", oauthContract.oauth_consumer_key, oauthContract.oauth_signature_method, oauthContract.oauth_signature, oauthContract.oauth_timestamp, oauthContract.oauth_nonce);

            string json = "[{\"id\":121,\"parent_id\":0,\"status\":\"completed\",\"currency\":\"PKR\",\"version\":\"7.7.0\",\"prices_include_tax\":false,\"date_created\":\"2023-07-05T10:05:45\",\"date_modified\":\"2023-07-05T10:11:44\",\"discount_total\":\"0.00\",\"discount_tax\":\"0.00\",\"shipping_total\":\"200.00\",\"shipping_tax\":\"0.00\",\"cart_tax\":\"0.00\",\"total\":\"289.98\",\"total_tax\":\"0.00\",\"customer_id\":0,\"order_key\":\"wc_order_bD9yIe8oR7aPr\",\"billing\":{\"first_name\":\"Muhammad\",\"last_name\":\"Taha\",\"company\":\"Evincible solutions\",\"address_1\":\"D23, Blk H\",\"address_2\":\"\",\"city\":\"Karachi\",\"state\":\"SD\",\"postcode\":\"75000\",\"country\":\"PK\",\"email\":\"taha@evinciblesolutions.com\",\"phone\":\"021-32323232\"},\"shipping\":{\"first_name\":\"Muhammad\",\"last_name\":\"Taha\",\"company\":\"Evincible solutions\",\"address_1\":\"D23, Blk H\",\"address_2\":\"\",\"city\":\"Karachi\",\"state\":\"SD\",\"postcode\":\"75000\",\"country\":\"PK\",\"phone\":\"021-32323232\"},\"payment_method\":\"cod\",\"payment_method_title\":\"Cash on delivery\",\"transaction_id\":\"123123\",\"customer_ip_address\":\"\",\"customer_user_agent\":\"\",\"created_via\":\"admin\",\"customer_note\":\"Please fulfill the order.\",\"date_completed\":\"2023-07-05T10:11:44\",\"date_paid\":\"2023-07-05T10:11:38\",\"cart_hash\":\"\",\"number\":\"121\",\"meta_data\":[],\"line_items\":[{\"id\":13,\"name\":\"Dat Divi Engine Life Hoodie - Limited Edition - Medium\",\"product_id\":54,\"variation_id\":56,\"quantity\":2,\"tax_class\":\"\",\"subtotal\":\"89.98\",\"subtotal_tax\":\"0.00\",\"total\":\"89.98\",\"total_tax\":\"0.00\",\"taxes\":[{\"id\":1,\"total\":\"\",\"subtotal\":\"\"}],\"meta_data\":[{\"id\":109,\"key\":\"pa_size\",\"value\":\"medium\",\"display_key\":\"Size\",\"display_value\":\"Medium\"},{\"id\":165,\"key\":\"_reduced_stock\",\"value\":\"2\",\"display_key\":\"_reduced_stock\",\"display_value\":\"2\"}],\"sku\":\"\",\"price\":44.99,\"image\":{\"id\":93,\"src\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/wp-content\\/uploads\\/2023\\/05\\/Hoodie-1.jpg\"},\"parent_name\":\"Dat Divi Engine Life Hoodie - Limited Edition\"}],\"tax_lines\":[{\"id\":22,\"rate_code\":\"US-NY-VAT-1\",\"rate_id\":1,\"label\":\"VAT\",\"compound\":false,\"tax_total\":\"0.00\",\"shipping_tax_total\":\"0.00\",\"rate_percent\":15,\"meta_data\":[]}],\"shipping_lines\":[{\"id\":16,\"method_title\":\"Shipping\",\"method_id\":\"flat_rate\",\"instance_id\":\"0\",\"total\":\"200.00\",\"total_tax\":\"0.00\",\"taxes\":[{\"id\":1,\"total\":\"\",\"subtotal\":\"\"}],\"meta_data\":[]}],\"fee_lines\":[],\"coupon_lines\":[],\"refunds\":[],\"payment_url\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/checkout\\/order-pay\\/121\\/?pay_for_order=true&key=wc_order_bD9yIe8oR7aPr\",\"is_editable\":false,\"needs_payment\":false,\"needs_processing\":true,\"date_created_gmt\":\"2023-07-05T09:05:45\",\"date_modified_gmt\":\"2023-07-05T09:11:44\",\"date_completed_gmt\":\"2023-07-05T09:11:44\",\"date_paid_gmt\":\"2023-07-05T09:11:38\",\"currency_symbol\":\"\\u20a8\",\"_links\":{\"self\":[{\"href\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/wp-json\\/wc\\/v3\\/orders\\/121\"}],\"collection\":[{\"href\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/wp-json\\/wc\\/v3\\/orders\"}]}},{\"id\":118,\"parent_id\":0,\"status\":\"processing\",\"currency\":\"PKR\",\"version\":\"7.7.0\",\"prices_include_tax\":false,\"date_created\":\"2023-07-05T10:04:26\",\"date_modified\":\"2023-07-05T10:05:17\",\"discount_total\":\"0.00\",\"discount_tax\":\"0.00\",\"shipping_total\":\"0.00\",\"shipping_tax\":\"0.00\",\"cart_tax\":\"0.00\",\"total\":\"155.00\",\"total_tax\":\"0.00\",\"customer_id\":0,\"order_key\":\"wc_order_aaVdL6W96ajUK\",\"billing\":{\"first_name\":\"jack\",\"last_name\":\"smith\",\"company\":\"Evincible solutions\",\"address_1\":\"D23, Blk H\",\"address_2\":\"\",\"city\":\"Karachi\",\"state\":\"SD\",\"postcode\":\"75000\",\"country\":\"PK\",\"email\":\"info@evs.com\",\"phone\":\"021-32323232\"},\"shipping\":{\"first_name\":\"jack\",\"last_name\":\"smith\",\"company\":\"Evincible solutions\",\"address_1\":\"D23, Blk H\",\"address_2\":\"\",\"city\":\"Karachi\",\"state\":\"SD\",\"postcode\":\"75000\",\"country\":\"PK\",\"phone\":\"021-32323232\"},\"payment_method\":\"cod\",\"payment_method_title\":\"Cash on delivery\",\"transaction_id\":\"0004\",\"customer_ip_address\":\"\",\"customer_user_agent\":\"\",\"created_via\":\"\",\"customer_note\":\"\",\"date_completed\":null,\"date_paid\":null,\"cart_hash\":\"\",\"number\":\"118\",\"meta_data\":[],\"line_items\":[{\"id\":5,\"name\":\"Dat Divi Engine Life Hoodie - Limited Edition - Large\",\"product_id\":54,\"variation_id\":55,\"quantity\":2,\"tax_class\":\"\",\"subtotal\":\"89.98\",\"subtotal_tax\":\"0.00\",\"total\":\"89.98\",\"total_tax\":\"0.00\",\"taxes\":[],\"meta_data\":[{\"id\":45,\"key\":\"pa_size\",\"value\":\"large\",\"display_key\":\"Size\",\"display_value\":\"Large\"},{\"id\":99,\"key\":\"_reduced_stock\",\"value\":\"2\",\"display_key\":\"_reduced_stock\",\"display_value\":\"2\"}],\"sku\":\"\",\"price\":44.99,\"image\":{\"id\":93,\"src\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/wp-content\\/uploads\\/2023\\/05\\/Hoodie-1.jpg\"},\"parent_name\":\"Dat Divi Engine Life Hoodie - Limited Edition\"},{\"id\":6,\"name\":\"Dat Divi Engine Life Crop-top (3-Tone) - Small\",\"product_id\":91,\"variation_id\":95,\"quantity\":5,\"tax_class\":\"\",\"subtotal\":\"64.95\",\"subtotal_tax\":\"0.00\",\"total\":\"64.95\",\"total_tax\":\"0.00\",\"taxes\":[],\"meta_data\":[{\"id\":55,\"key\":\"pa_size\",\"value\":\"small\",\"display_key\":\"Size\",\"display_value\":\"Small\"}],\"sku\":\"\",\"price\":12.99,\"image\":{\"id\":113,\"src\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/wp-content\\/uploads\\/2023\\/05\\/Dat-Divi_Life.jpg\"},\"parent_name\":\"Dat Divi Engine Life Crop-top (3-Tone)\"}],\"tax_lines\":[],\"shipping_lines\":[],\"fee_lines\":[],\"coupon_lines\":[],\"refunds\":[],\"payment_url\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/checkout\\/order-pay\\/118\\/?pay_for_order=true&key=wc_order_aaVdL6W96ajUK\",\"is_editable\":false,\"needs_payment\":false,\"needs_processing\":true,\"date_created_gmt\":\"2023-07-05T09:04:26\",\"date_modified_gmt\":\"2023-07-05T09:05:17\",\"date_completed_gmt\":null,\"date_paid_gmt\":null,\"currency_symbol\":\"\\u20a8\",\"_links\":{\"self\":[{\"href\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/wp-json\\/wc\\/v3\\/orders\\/118\"}],\"collection\":[{\"href\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/wp-json\\/wc\\/v3\\/orders\"}]}},{\"id\":115,\"parent_id\":0,\"status\":\"completed\",\"currency\":\"PKR\",\"version\":\"7.7.0\",\"prices_include_tax\":false,\"date_created\":\"2023-05-16T14:35:48\",\"date_modified\":\"2023-07-05T10:03:44\",\"discount_total\":\"0.00\",\"discount_tax\":\"0.00\",\"shipping_total\":\"0.00\",\"shipping_tax\":\"0.00\",\"cart_tax\":\"0.00\",\"total\":\"90.00\",\"total_tax\":\"0.00\",\"customer_id\":2,\"order_key\":\"wc_order_spSUznlxkm6kI\",\"billing\":{\"first_name\":\"John\",\"last_name\":\"Doe\",\"company\":\"\",\"address_1\":\"969 Market\",\"address_2\":\"\",\"city\":\"San Francisco\",\"state\":\"CA\",\"postcode\":\"94103\",\"country\":\"US\",\"email\":\"john.doe@example.com\",\"phone\":\"(555) 555-5555\"},\"shipping\":{\"first_name\":\"John\",\"last_name\":\"Doe\",\"company\":\"\",\"address_1\":\"969 Market\",\"address_2\":\"\",\"city\":\"San Francisco\",\"state\":\"CA\",\"postcode\":\"94103\",\"country\":\"US\",\"phone\":\"\"},\"payment_method\":\"\",\"payment_method_title\":\"\",\"transaction_id\":\"\",\"customer_ip_address\":\"\",\"customer_user_agent\":\"\",\"created_via\":\"admin\",\"customer_note\":\"\",\"date_completed\":\"2023-07-05T10:03:44\",\"date_paid\":\"2023-05-16T14:37:29\",\"cart_hash\":\"\",\"number\":\"115\",\"meta_data\":[],\"line_items\":[{\"id\":4,\"name\":\"Dat Divi Engine Life Hoodie - Limited Edition - Medium\",\"product_id\":54,\"variation_id\":56,\"quantity\":2,\"tax_class\":\"\",\"subtotal\":\"89.98\",\"subtotal_tax\":\"0.00\",\"total\":\"89.98\",\"total_tax\":\"0.00\",\"taxes\":[],\"meta_data\":[{\"id\":34,\"key\":\"pa_size\",\"value\":\"medium\",\"display_key\":\"Size\",\"display_value\":\"Medium\"},{\"id\":35,\"key\":\"_reduced_stock\",\"value\":\"2\",\"display_key\":\"_reduced_stock\",\"display_value\":\"2\"}],\"sku\":\"\",\"price\":44.99,\"image\":{\"id\":93,\"src\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/wp-content\\/uploads\\/2023\\/05\\/Hoodie-1.jpg\"},\"parent_name\":\"Dat Divi Engine Life Hoodie - Limited Edition\"}],\"tax_lines\":[],\"shipping_lines\":[],\"fee_lines\":[],\"coupon_lines\":[],\"refunds\":[],\"payment_url\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/checkout\\/order-pay\\/115\\/?pay_for_order=true&key=wc_order_spSUznlxkm6kI\",\"is_editable\":false,\"needs_payment\":false,\"needs_processing\":true,\"date_created_gmt\":\"2023-05-16T13:35:48\",\"date_modified_gmt\":\"2023-07-05T09:03:44\",\"date_completed_gmt\":\"2023-07-05T09:03:44\",\"date_paid_gmt\":\"2023-05-16T13:37:29\",\"currency_symbol\":\"\\u20a8\",\"_links\":{\"self\":[{\"href\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/wp-json\\/wc\\/v3\\/orders\\/115\"}],\"collection\":[{\"href\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/wp-json\\/wc\\/v3\\/orders\"}],\"customer\":[{\"href\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/wp-json\\/wc\\/v3\\/customers\\/2\"}]}},{\"id\":114,\"parent_id\":0,\"status\":\"completed\",\"currency\":\"PKR\",\"version\":\"7.7.0\",\"prices_include_tax\":false,\"date_created\":\"2023-05-16T13:43:03\",\"date_modified\":\"2023-05-16T14:11:27\",\"discount_total\":\"0.00\",\"discount_tax\":\"0.00\",\"shipping_total\":\"10.00\",\"shipping_tax\":\"0.00\",\"cart_tax\":\"0.00\",\"total\":\"20.00\",\"total_tax\":\"0.00\",\"customer_id\":0,\"order_key\":\"wc_order_XqaksQ7dJi5NM\",\"billing\":{\"first_name\":\"John\",\"last_name\":\"Doe\",\"company\":\"\",\"address_1\":\"969 Market\",\"address_2\":\"\",\"city\":\"San Francisco\",\"state\":\"CA\",\"postcode\":\"94103\",\"country\":\"US\",\"email\":\"john.doe@example.com\",\"phone\":\"(555) 555-5555\"},\"shipping\":{\"first_name\":\"John\",\"last_name\":\"Doe\",\"company\":\"\",\"address_1\":\"969 Market\",\"address_2\":\"\",\"city\":\"San Francisco\",\"state\":\"CA\",\"postcode\":\"94103\",\"country\":\"US\",\"phone\":\"\"},\"payment_method\":\"bacs\",\"payment_method_title\":\"Direct Bank Transfer\",\"transaction_id\":\"\",\"customer_ip_address\":\"\",\"customer_user_agent\":\"\",\"created_via\":\"rest-api\",\"customer_note\":\"\",\"date_completed\":\"2023-05-16T14:11:27\",\"date_paid\":\"2023-05-16T13:43:09\",\"cart_hash\":\"\",\"number\":\"114\",\"meta_data\":[],\"line_items\":[{\"id\":1,\"name\":\"\",\"product_id\":0,\"variation_id\":0,\"quantity\":2,\"tax_class\":\"\",\"subtotal\":\"0.00\",\"subtotal_tax\":\"0.00\",\"total\":\"0.00\",\"total_tax\":\"0.00\",\"taxes\":[],\"meta_data\":[],\"sku\":null,\"price\":0,\"image\":{\"id\":0,\"src\":\"\"},\"parent_name\":null},{\"id\":2,\"name\":\"Brand Buttons - WordPress\",\"product_id\":19,\"variation_id\":23,\"quantity\":1,\"tax_class\":\"\",\"subtotal\":\"9.99\",\"subtotal_tax\":\"0.00\",\"total\":\"9.99\",\"total_tax\":\"0.00\",\"taxes\":[],\"meta_data\":[{\"id\":19,\"key\":\"pa_brand\",\"value\":\"wordpress\",\"display_key\":\"Brand\",\"display_value\":\"WordPress\"}],\"sku\":\"\",\"price\":9.99,\"image\":{\"id\":59,\"src\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/wp-content\\/uploads\\/2023\\/05\\/DE-Pins-3.jpg\"},\"parent_name\":\"Brand Buttons\"}],\"tax_lines\":[],\"shipping_lines\":[{\"id\":3,\"method_title\":\"Flat Rate\",\"method_id\":\"flat_rate\",\"instance_id\":\"\",\"total\":\"10.00\",\"total_tax\":\"0.00\",\"taxes\":[],\"meta_data\":[]}],\"fee_lines\":[],\"coupon_lines\":[],\"refunds\":[],\"payment_url\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/checkout\\/order-pay\\/114\\/?pay_for_order=true&key=wc_order_XqaksQ7dJi5NM\",\"is_editable\":false,\"needs_payment\":false,\"needs_processing\":true,\"date_created_gmt\":\"2023-05-16T12:43:03\",\"date_modified_gmt\":\"2023-05-16T13:11:27\",\"date_completed_gmt\":\"2023-05-16T13:11:27\",\"date_paid_gmt\":\"2023-05-16T12:43:09\",\"currency_symbol\":\"\\u20a8\",\"_links\":{\"self\":[{\"href\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/wp-json\\/wc\\/v3\\/orders\\/114\"}],\"collection\":[{\"href\":\"http:\\/\\/202.47.59.85:802\\/mywebsite\\/wp-json\\/wc\\/v3\\/orders\"}]}}]";
            IntegrationAPIs integrationAPIs = new IntegrationAPIs();
            Root root = new Root();
            List<Root> a = integrationAPIs.WooCommerceGetOrders_RespDeserialize(json);

            for (int i = 0; i < a.Count; i++)
            {
                for(int k = 0; k < a[i].line_items.Count; k++)
                {

                }
            }

            //System.Collections.IEnumerator aa = a.GetEnumerator();

            //while (aa.MoveNext())
            //{
            //    root = aa.Current(
            //}

        }
    }
}
